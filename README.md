# spring_homework_delivery_app
스프링 심화 주차 배달앱 API 구현
1. DB Table 설계
  - 가장 먼저 Entity 간 연관관계를 설계하고 이를 JPA가 제공하는 연관관계 어노테이션으로 구현하고자 했다.

![스프링 심화주차 과제 도메인 설계](https://user-images.githubusercontent.com/82041804/172036103-fd7f8ba7-31e8-4f65-af20-5bd819e473d1.JPG)

  - 고민했던 부분은 아래와 같다.
    - Order (주문) 테이블에서 음식과 수량을 같이 저장하는 방법 -> HasbMap을 사용했다. (@ElementCollection)
    - 양방향 연관관계 설정 -> 이번 과제에선 대부분 일방향으로만 사용했다.
  - 연관관계를 사용할 때 주의해야 할 부분은 아무래도 순서인 것 같다. 
    - 코드 작성 전 설계했던 구조대로 구현해 가며 심심치 않게 nullPointerException을 마주했는데,
    - 해당 오류는 연관관계만 정의하고 초기화가 이뤄지지 않아 발생했었다.  
    - 따라서 오늘의 교훈은 <먼저 DB Table 설계를 확실하게, 그 다음으로 설계도에 입각한 논리 구현에 충실하자>
      - 전 직장에서 로우코드 프로그래밍을 할 때에도 이렇게 했었는데 이번 과제에 도움이 됐던 것 같다. (위에 테이블 설계도도 로우코드 IDE를 통해 만든 것 😅)

-------------------------------------요구사항------------------------------------

1. 음식점 등록 및 조회
    - 음식점 정보 입력받아 등록
        1. 음식점 이름 (name)
        2. 최소주문 가격 (minOrderPrice)
            1. 허용값: 1,000원 ~ 100,000원 입력
            2. 100 원 단위로만 입력 가능 (예. 2,220원 입력 시 에러발생. 2,300원은 입력 가능)
            3. 허용값이 아니거나 100원 단위 입력이 아닌 경우 에러 발생시킴
        3. 기본 배달비 (deliveryFee)
            1. 허용값: 0원 ~ 10,000원 (예. 11,000원 입력 시 에러발생.)
            2. 500 원 단위로만 입력 가능 (예. 2,200원 입력 시 에러발생. 2,500원 입력 가능) 
            
    - 음식점 조회
        - 등록된 모든 음식점 정보 조회 가능
            1. 등록 시 입력한 음식점 정보 (name, minOrderPrice, deliveryFee)
            2. DB 테이블 ID (id)  
            
![image](https://user-images.githubusercontent.com/82041804/172036050-4b45fb06-9a2a-4c30-a87a-6e1e84dbcb53.png)


2. 음식 등록 및 메뉴판 조회
    - 음식점 ID 및 음식 정보 입력받아 등록
        1. 음식점 ID (restaurantId)
            1. 음식점 DB 테이블 ID
        2. 음식명 (name)
            1. 같은 음식점 내에서는 음식 이름이 중복될 수 없음 (예. '자담치킨 강남점'에 '후라이드치킨' 이 이미 등록되어 있다면 중복하여 등록할 수 없지만, 다른 음식점인 '맘스터치 강남점'에는 '후라이드치킨' 을 등록 가능)
        3. 가격 (price)
            1. 허용값: 100원 ~ 1,000,000원
            2. 100 원 단위로만 입력 가능 (예. 2,220원 입력 시 에러발생. 2,300원 입력 가능)
            3. 허용값이 아니거나 100원 단위 입력이 아닌 경우 에러 발생시킴
            
    - 메뉴판 조회
        - 하나의 음식점에 등록된 모든 음식 정보 조회
            1. 등록 시 입력한 음식 정보 (name, price)
            2. DB 테이블 ID (id)
![image](https://user-images.githubusercontent.com/82041804/172036059-348360fa-2658-48aa-94cf-604854100bb9.png)


3. 주문 요청하기 및 주문 조회
    - 주문 요청 시 배달 음식점 및 음식 정보 입력받음
        1. 음식점 ID (restaurantId)
        2. 음식 주문 정보 (foods)
            1. 음식 ID (id)
            2. 음식을 주문할 수량 (quantity)
                1. 허용값: 1 ~ 100
                2. 허용값이 아니면 에러 발생시킴
                
    - 주문 요청에 대한 응답으로 다음 정보를 포함시킴
        1. 주문 음식점 이름 (restaurantName)
        2. 주문 음식 정보 (foods)
            - 주문 음식명 (name)
            - 주문 수량 (quantity)
            - 주문 음식의 가격 (price)
                - 계산방법
                    - 주문 음식 1개의 가격 * 주문 수량
        3. 배달비 (deliveryFee)
            - 주문 음식점의 기본 배달비
        4. 최종 결제 금액 (totalPrice)
            - 계산방법
                - 주문 음식 가격들의 총 합 + 배달비
            - "주문 음식 가격들의 총 합" 이 주문 음식점의 "최소주문 가격" 을 넘지 않을 시 에러 발생시킴
            
    - 주문 조회
        - 그동안 성공한 모든 주문 요청을 조회 가능
![image](https://user-images.githubusercontent.com/82041804/172036067-df0c83bc-8553-4cb7-aadc-878284b00ad0.png)
